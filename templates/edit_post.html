{% extends "base.html" %}

{% block content %}
<div class="edit-post">
    <div class="back-button">
        <a href="{{ url_for('my_posts') }}" class="btn btn-secondary">‚Üê –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</a>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>

    <h2>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h2>

    <div id="userAlert" class="alert alert-warning" style="display: none;">
        ‚ùó –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π
    </div>

    <div id="postNotFound" class="alert alert-danger" style="display: none;">
        ‚ùå –û–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –∏–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –µ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    </div>

    <form id="editPostForm" style="display: none;">
        <input type="hidden" id="postId" value="{{ post_id }}">

        <div class="form-group">
            <label for="title">–ó–∞–≥–æ–ª–æ–≤–æ–∫ *</label>
            <input type="text" id="title" name="title" required maxlength="200" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ">
            <div class="char-counter"><span id="titleCount">0</span>/200</div>
        </div>

        <div class="form-group">
            <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
            <select id="category" name="category" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                {% for value, label in categories %}
                    <option value="{{ value }}">{{ label }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="content">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
            <textarea id="content" name="content" required rows="6" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è"></textarea>
            <div class="char-counter"><span id="contentCount">0</span>/2000</div>
        </div>

        <div class="form-group">
            <label for="price">–¶–µ–Ω–∞</label>
            <input type="text" id="price" name="price" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1000 —Ä—É–±., –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –î–æ–≥–æ–≤–æ—Ä–Ω–∞—è">
            <div class="help-text">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞</div>
        </div>

        <div class="form-group">
            <label for="contact_info">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è *</label>
            <input type="text" id="contact_info" name="contact_info" required placeholder="–¢–µ–ª–µ–≥—Ä–∞–º @username, —Ç–µ–ª–µ—Ñ–æ–Ω, –∏–ª–∏ –¥—Ä—É–≥–∞—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">
        </div>

        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" id="is_active" name="is_active" checked>
                <span class="checkmark"></span>
                ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –æ–±—â–µ–º —Å–ø–∏—Å–∫–µ)
            </label>
            <div class="help-text">–°–Ω–∏–º–∏—Ç–µ –≥–∞–ª–æ—á–∫—É —á—Ç–æ–±—ã –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–∫—Ä—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            <button type="button" id="deleteBtn" class="btn btn-danger">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
            <a href="{{ url_for('my_posts') }}" class="btn btn-secondary">‚ùå –û—Ç–º–µ–Ω–∞</a>
        </div>
    </form>

    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è...</p>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/edit_post.js') }}"></script>
{% endblock %}